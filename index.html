<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Guitar Hero</title>
    <link rel="icon" href="./img/icono.png">
</head>

<body>

    <style>
        .circulo1 {
            width: 150px;
            height: 150px;
            /*border: 1px #000000 solid;*/
            /*border-radius: 50%;*/
            text-align: center;
            margin-top: calc(50% - 75px);
            /*margin-top: 40px;*/
            position: absolute;
        }

        .circulo2 {
            width: 50px;
            height: 50px;
            background: black;
            border-radius: 50%;
        }

        .content {
            width: 560px;
            height: 650px;
            border: black 1px solid;
            background: url("./img/fondoTraste.jpg");
            position: relative;
        }

        .div1 {
            left: 8.5%;
            top: 75%;
            width: 80%;
            height: 6%;
            border: white 2px dashed;
            background-color: transparent;
            position: relative;
            z-index: 1;
        }
    </style>
    <div class="content">
        <div class="div1"></div>
    </div>



    <script>

        var content = document.querySelector(".content")

        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        const randomNumber = getRandomInt(1, 4);
        function crearCompetidor(i) {
            const dis = new Map();
            dis.set(1, "22%")
            dis.set(2, "30%")
            dis.set(3, "40%");
            dis.set(4, "50%")
            var competidorDiv = document.createElement("div");
            competidorDiv.setAttribute("class", "circulo1");
            competidorDiv.dataset.velocidad = Math.random() * 5;
            content.appendChild(competidorDiv)
            var competidorImg = document.createElement("img");
            competidorImg.setAttribute("src", "./img/disco.gif");
            competidorImg.setAttribute("width", "30px");
            competidorDiv.dataset.top = dis.get(getRandomInt(1, 4))
            competidorDiv.appendChild(competidorImg)
            // competidorDiv.innerHTML = i
        }


        setInterval(function () {
            crearCompetidor(1);
        }, 1000)

        intervalo = "";
        function start() {


            cont = 0;
            intervalo = setInterval(function () {

                cont = cont + 1;
                var elementos = document.querySelectorAll(".circulo1");
                var finalReached = false;
                elementos.forEach(function (elemento) {
                    if ((cont * elemento.dataset.velocidad) >= (content.offsetHeight - elemento.offsetHeight)) {
                        finalReached = true;
                    }
                    elemento.style.marginLeft = elemento.dataset.top
                    elemento.style.marginTop = (cont * elemento.dataset.velocidad) + "px"
                })
                if (finalReached) {
                    clearInterval(intervalo);
                }
            }, 120);

        }

        document.addEventListener("keyup", function (evt) {

            console.log(evt.key)
            if (evt.key === "a") {
                start()
            }
            if (evt.key === "s") {
                clearInterval(intervalo)

            }
        })


    </script>



</body>

</html>